# Генератор видео для AI моделей

Этот компонент позволяет генерировать видео с различными AI моделями прямо на страницах блога.

## Как это работает

1. **На странице блога** - если у поста есть поле `modelName`, автоматически отображается генератор видео
2. **API endpoint** - `/api/generate-model-video` обрабатывает запросы на генерацию
3. **SuperDuperAI** - использует внешний API для создания видео

## Поддерживаемые модели

### Kling 2.1

- **Длительность**: до 120 секунд
- **Соотношение**: 16:9
- **Разрешение**: 1080x1920
- **Описание**: Быстрая генерация коротких видео клипов с плавными движениями

### Sora

- **Длительность**: до 10 секунд
- **Соотношение**: 9:16 (вертикальное)
- **Разрешение**: 1080x1920
- **Описание**: Экспериментальная модель OpenAI для коротких вертикальных видео

### Veo2

- **Длительность**: до 8 секунд
- **Соотношение**: 16:9
- **Разрешение**: 1280x720
- **Описание**: Преобразование статичных изображений в динамичные HD видео

### Google Imagen 4

- **Длительность**: до 8 секунд
- **Соотношение**: 1:1 (квадратное)
- **Разрешение**: 2048x2048
- **Описание**: Генерация высококачественных изображений

## Как добавить поддержку новой модели

### 1. Обновить конфигурацию ContentLayer

В `contentlayer.config.ts` уже добавлены поля:

- `modelName` - название модели
- `modelConfig` - конфигурация модели

### 2. Добавить модель в API

В `src/app/api/generate-model-video/route.ts` добавить в `MODEL_CONFIGS`:

```typescript
'Название модели': {
  generation_config_name: 'путь/к/модели',
  maxDuration: 8,
  aspectRatio: '16:9',
  width: 1280,
  height: 720,
  frameRate: 30,
},
```

### 3. Обновить MDX файл

В файле модели добавить frontmatter:

```yaml
---
title: "Название модели"
description: "Описание"
date: 2025-05-20
slug: slug-модели
locale: tr
modelName: "Название модели"
modelConfig:
  maxDuration: 8
  aspectRatio: "16:9"
  width: 1280
  height: 720
  frameRate: 30
  description: "Описание модели на русском"
seo:
  title: "SEO заголовок"
  description: "SEO описание"
---
```

## Использование

### На странице блога

Перейдите на страницу модели, например: `http://localhost:3000/tr/blog/kling-2-1`

### Тестовая страница

Для тестирования всех моделей: `http://localhost:3000/test-video-generator`

## Компоненты

### ModelVideoGenerator

Основной компонент для генерации видео.

**Props:**

- `modelName: string` - название модели
- `modelConfig?: object` - конфигурация модели

**Функции:**

- Ввод промпта для видео
- Выбор количества видео (1-3)
- Отслеживание прогресса генерации
- Просмотр и скачивание результатов

### API Endpoints

#### POST /api/generate-model-video

Запускает генерацию видео.

**Body:**

```json
{
  "generationId": "уникальный_id",
  "prompt": "описание видео",
  "modelName": "название модели",
  "modelConfig": {
    /* конфигурация */
  },
  "videoCount": 1,
  "status": "pending",
  "progress": 0,
  "createdAt": "2025-01-01T00:00:00.000Z"
}
```

#### GET /api/generate-model-video?generationId=id

Проверяет статус генерации.

**Response:**

```json
{
  "success": true,
  "generationId": "id",
  "status": "processing|completed|error",
  "progress": 50,
  "videos": [
    {
      "fileId": "file_id",
      "url": "https://...",
      "thumbnailUrl": "https://...",
      "status": "completed"
    }
  ]
}
```

## Стилизация

Компонент использует:

- `@turbo-super/ui` для UI компонентов
- Tailwind CSS для стилизации
- Lucide React для иконок

## Обработка ошибок

- Валидация входных данных с помощью Zod
- Обработка ошибок API
- Пользовательские уведомления об ошибках
- Автоматический retry для проверки статуса

## Производительность

- Опрос статуса каждые 3 секунды
- Автоматическое прекращение опроса при завершении
- Кэширование данных генерации в файлах
- Оптимизированные запросы к API

## Безопасность

- Валидация всех входных данных
- Ограничение количества видео (1-3)
- Проверка авторизации через SuperDuperAI
- Безопасное хранение данных генерации
